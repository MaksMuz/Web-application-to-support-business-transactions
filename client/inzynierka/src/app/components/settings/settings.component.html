<div class="container p-5">
  <div class="card-header">
    <h3 class="mb-0">Settings</h3>
  </div>
  <div *ngIf="!userSettings" class="m-auto">
    <h1 class="text-center display-3 mt-5">
      <i class="fa fa-spinner fa-spin"></i>
    </h1>
  </div>
  <div *ngIf="userSettings" class="card bg-light">
    <div class="card-body">
      <form>

        <div class="form-group">
          <label>Name</label>
          <input type="text" [(ngModel)]="userSettings.name" #name="ngModel" name="name"
                 class="form-control rounded-0" required minlength="2" required>
          <div *ngIf="name.invalid && (name.touched)"
               class="alert alert-danger">

            <div *ngIf="name.errors.required">
              Name is required.
            </div>
            <div *ngIf="name.errors.minlength">
              Name must be at least 2 characters long.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Last Name</label>
          <input type="text" [(ngModel)]="userSettings.lastName" #lastName="ngModel" name="lastName"
                 class="form-control rounded-0" required minlength="2" required>
          <div *ngIf="lastName.invalid && (lastName.touched)"
               class="alert alert-danger">

            <div *ngIf="lastName.errors.required">
              Last Name is required.
            </div>
            <div *ngIf="lastName.errors.minlength">
              Last Name must be at least 2 characters long.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="userSettings.email" #email="ngModel" name="email"
                 [class.is-invalid]="email.invalid && email.touched"
                 class="form-control rounded-0" [pattern]="emailPattern" required>
          <div *ngIf="email.invalid && email.touched"
               class="alert alert-danger">
            <div *ngIf="email.errors.required">
              Email is required.
            </div>
            <div *ngIf="email.errors.pattern">
              Please provide a valid email address.
            </div>
          </div>
        </div>
        <button type="button" class="btn btn-dark" (click)="update()">Update</button>
        <button type="button" class="btn btn-dark float-right" routerLink="/account">Back</button>
      </form>
    </div>
  </div>
</div>

<div class="container p-5">
  <div class="card-header">
    <h3 class="mb-0">Change Password</h3>
  </div>
  <div *ngIf="!userSettings" class="m-auto">
    <h1 class="text-center display-3 mt-5">
      <i class="fa fa-spinner fa-spin"></i>
    </h1>
  </div>
  <div *ngIf="userSettings" class="card bg-light">
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-group">
          <label>Password</label>
          <input
            formControlName="password"
            type="password"
            class="form-control">
          <div *ngIf="f.password.touched && f.password.invalid" class="alert alert-danger">
            <div *ngIf="f.password.errors.minlength">Password must be at least 8 characters</div>
          </div>
        </div>

        <div class="form-group">
          <label>Confirm Password</label>
          <input
            formControlName="password2"
            type="password"
            class="form-control">
          <div *ngIf="f.password2.touched && f.password2.invalid" class="alert alert-danger">
            <div *ngIf="f.password2.errors.passwordValidator">
              Password and Confirm Password must be match.
            </div>
          </div>
        </div>
        <button class="btn btn-dark" type="submit" [disabled]="!form.valid">Submit</button>
        <button type="button" class="btn btn-dark float-right" routerLink="/account">Back</button>
      </form>
    </div>
  </div>
</div>
